<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Quantum Palm Analyzer v4.3 ¬∑ Sathyadarshana</title>
<style>
:root{
  --bg:#0b0f16;--card:#0f172a;--neon:#00e5ff;--pri:#16f0a7;--mut:#9fb7d4;
}
body{margin:0;background:radial-gradient(1200px 800px at 50% -10%,#0e2133,#0b0f16);
     color:#e6f0ff;font-family:system-ui;text-align:center;}
h1{margin:10px 0;color:var(--neon);}
nav{display:flex;justify-content:center;flex-wrap:wrap;gap:10px;margin-bottom:10px}
button,a{background:#0d1522;color:#9edcff;border:1px solid #17324a;
  border-radius:10px;padding:6px 10px;font-weight:600;cursor:pointer;text-decoration:none;}
button:hover,a:hover{background:#00e5ff;color:#000}
.wrap{max-width:900px;margin:auto;padding:10px}
.camBox{position:relative;width:min(95vw,680px);aspect-ratio:3/4;border-radius:16px;
  border:2px solid #00e5ff;overflow:hidden;margin:auto;box-shadow:0 0 30px #001 inset}
.camBox video,.camBox canvas{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
.aura{position:absolute;inset:0;border-radius:16px;mix-blend-mode:screen;
  background:conic-gradient(from 0deg,#00e5ff88,#16f0a788,#9a6bff88,#00e5ff88);
  animation:spin 6s linear infinite;opacity:.7;}
@keyframes spin{to{transform:rotate(360deg)}}
.bar{background:#0b1320;height:10px;border-radius:10px;overflow:hidden;margin:3px 0}
.bar span{display:block;height:100%;transform-origin:left center;transform:scaleX(0);
  transition:transform 1s ease;}
.bar.heart span{background:linear-gradient(90deg,#ff6b6b,#ff3b3b)}
.bar.head span{background:linear-gradient(90deg,#60a5fa,#3b82f6)}
.bar.life span{background:linear-gradient(90deg,#34d399,#10b981)}
.bar.fate span{background:linear-gradient(90deg,#f59e0b,#fbbf24)}
.bar.sun span{background:linear-gradient(90deg,#f97316,#fb923c)}
.bar.merc span{background:linear-gradient(90deg,#a78bfa,#8b5cf6)}
.bar.mar span{background:linear-gradient(90deg,#f472b6,#ec4899)}
canvas#radar{display:block;margin:10px auto;background:#0b1320;border:1px solid #17324a;border-radius:12px}
.langbar{display:flex;flex-wrap:wrap;justify-content:center;gap:5px;margin:5px}
.langbar button{background:#0b1320;border:1px solid #17324a;color:#9edcff;border-radius:999px;padding:4px 8px;font-weight:700}
.langbar button:hover{background:#00e5ff;color:#001015}
#google_translate_element{display:inline-block;margin-left:6px}
</style>
</head>
<body>
<h1>Quantum Palm Analyzer v4.3</h1>
<div class="langbar">
  <span>üåê</span>
  <button data-lang="en">English</button>
  <button data-lang="si">‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω</button>
  <button data-lang="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
  <button data-lang="de">Deutsch</button>
  <button data-lang="it">Italiano</button>
  <button data-lang="ja">Êó•Êú¨Ë™û</button>
  <button data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
  <button data-lang="zh-CN">‰∏≠Êñá</button>
  <button data-lang="fr">Fran√ßais</button>
  <button data-lang="es">Espa√±ol</button>
  <button data-lang="tr">T√ºrk√ße</button>
  <button data-lang="ru">–†—É—Å—Å–∫–∏–π</button>
  <span id="google_translate_element"></span>
</div>

<nav>
  <a href="../astrology.html">‚Üê Astrology</a>
  <button id="startCam">üì∑ Start</button>
  <button id="capture">Capture</button>
  <label for="filePick" class="btn">Upload</label>
  <input id="filePick" type="file" accept="image/*" hidden/>
  <button id="analyze">Analyze</button>
  <button id="pdf">üìÑ PDF</button>
</nav>

<div class="wrap">
  <div class="camBox" id="camBox">
    <video id="video" playsinline autoplay muted hidden></video>
    <canvas id="canvas"></canvas>
    <div class="aura"></div>
  </div>

  <h3 id="status">No image yet</h3>
  <div id="conf">Confidence ‚Äî</div>

  <div id="bars">
    <div class="bar heart"><span></span></div>
    <div class="bar head"><span></span></div>
    <div class="bar life"><span></span></div>
    <div class="bar fate"><span></span></div>
    <div class="bar sun"><span></span></div>
    <div class="bar merc"><span></span></div>
    <div class="bar mar"><span></span></div>
  </div>

  <canvas id="radar" width="300" height="230"></canvas>
  <pre id="insight">üúÅ Waiting for analysis...</pre>
</div>

<script>
/* --- Google Translate setup --- */
function googleTranslateElementInit(){
 new google.translate.TranslateElement({
   pageLanguage:'en',
   includedLanguages:'en,si,ta,de,it,ja,hi,zh-CN,fr,es,tr,ru',
   autoDisplay:false
 },'google_translate_element');
}
function setLangCookie(l){const v='/auto/'+l;document.cookie='googtrans='+v+';path=/';document.cookie='googtrans='+v+';path=/;domain='+location.hostname;location.reload();}
document.addEventListener('click',e=>{const b=e.target.closest('.langbar button[data-lang]');if(b)setLangCookie(b.dataset.lang);});
(function(){let s=document.createElement('script');s.src='https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';document.body.appendChild(s);})();

/* --- Camera setup --- */
const video=document.getElementById('video');
const canvas=document.getElementById('canvas');const ctx=canvas.getContext('2d');
const camBox=document.getElementById('camBox');
function resizeCanvas(){const r=camBox.getBoundingClientRect();const d=Math.min(window.devicePixelRatio||1,2);
canvas.width=r.width*d;canvas.height=r.height*d;}
new ResizeObserver(resizeCanvas).observe(camBox);resizeCanvas();

document.getElementById('startCam').onclick=async()=>{
 try{
  const stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:'environment'}});
  video.srcObject=stream;video.hidden=false;status.textContent='Camera active';
 }catch{alert('Camera access failed');}
};
document.getElementById('capture').onclick=()=>{
 if(!video.srcObject){alert('Start camera');return;}
 resizeCanvas();ctx.drawImage(video,0,0,canvas.width,canvas.height);status.textContent='Frame captured';
};
document.getElementById('filePick').onchange=e=>{
 const f=e.target.files[0];if(!f)return;const img=new Image();
 img.onload=()=>{resizeCanvas();ctx.drawImage(img,0,0,canvas.width,canvas.height);status.textContent='Image loaded'};
 img.src=URL.createObjectURL(f);
};

/* --- Analyzer --- */
const bars=document.querySelectorAll('.bar span');
document.getElementById('analyze').onclick=()=>{
 let data=ctx.getImageData(0,0,canvas.width,canvas.height).data;
 let sum=0;for(let i=0;i<data.length;i+=24){sum+=data[i]+data[i+1]+data[i+2];}
 let avg=sum/(data.length/24);let conf=Math.min(99,Math.max(60,avg/4));
 document.getElementById('conf').textContent='Confidence '+conf.toFixed(1)+'%';
 let scores=[90,84,80,70,76,85,65].map(v=>Math.min(100,v+(conf-80)/2));
 bars.forEach((b,i)=>{b.style.transform=`scaleX(${scores[i]/100})`;});
 drawRadar(scores);
 document.getElementById('insight').textContent=
 `üúÇ Confidence ${conf.toFixed(1)}%\n‚Ä¢ Heart ${scores[0]}  ‚Ä¢ Head ${scores[1]}\n‚Ä¢ Life ${scores[2]}  ‚Ä¢ Fate ${scores[3]}\n‚Ä¢ Sun ${scores[4]}  ‚Ä¢ Mercury ${scores[5]}  ‚Ä¢ Marriage ${scores[6]}\nInsight: Subtle energy balance emerging.`;
};
function drawRadar(a){
 const c=document.getElementById('radar'),g=c.getContext('2d');
 const w=c.width,h=c.height,cx=w/2,cy=h/2,R=Math.min(w,h)/2-18;
 g.clearRect(0,0,w,h);g.strokeStyle='#17324a';for(let r=0.2;r<=1;r+=0.2){g.beginPath();
  for(let i=0;i<7;i++){let ang=i*2*Math.PI/7-Math.PI/2;let x=cx+Math.cos(ang)*R*r;let y=cy+Math.sin(ang)*R*r;i?g.lineTo(x,y):g.moveTo(x,y);}g.closePath();g.stroke();}
 g.beginPath();for(let i=0;i<7;i++){let ang=i*2*Math.PI/7-Math.PI/2;let x=cx+Math.cos(ang)*R*(a[i]/100);let y=cy+Math.sin(ang)*R*(a[i]/100);i?g.lineTo(x,y):g.moveTo(x,y);}
 g.closePath();g.fillStyle='rgba(22,240,167,0.1)';g.fill();g.strokeStyle='#16f0a7';g.stroke();
}
</script>
</body>
</html>
