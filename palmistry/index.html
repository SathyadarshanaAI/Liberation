<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>🖐️ Sathyadarshana Quantum Palm Analyzer · V12.8 Beam Aura + Pre-Freeze Edition</title>
<style>
:root{
 --bg:#0b0f16;--card:#111a22;--neon:#00e5ff;--pri:#16f0a7;--gold:#FFD700;
}
body{margin:0;background:var(--bg);color:#e6f0ff;font-family:'Segoe UI',sans-serif;text-align:center;}
h1{color:var(--neon);margin:20px 0 6px;font-size:1.6rem;text-shadow:0 0 15px var(--neon);}
.wrap{display:flex;flex-wrap:wrap;justify-content:center;gap:24px;margin:20px auto;}
.camCol{background:var(--card);border-radius:18px;padding:14px;width:90%;max-width:340px;
position:relative;box-shadow:0 0 12px rgba(0,255,255,0.1);}
video,canvas{width:100%;border-radius:14px;background:#000;}
.camBtns{margin-top:10px;}
button{background:#101820;color:var(--neon);border:1px solid var(--neon);
border-radius:10px;padding:6px 12px;margin:3px;font-weight:600;transition:.25s;}
button:hover{background:var(--neon);color:#000;}
#status{margin:12px;color:var(--pri);font-weight:bold;}
.reportBox{background:#0e141b;border-radius:12px;padding:10px;margin:12px auto;
max-width:600px;color:#fff;}
.printZone{display:flex;justify-content:center;gap:20px;margin-top:20px;}
.printZone img{width:160px;border:2px solid var(--gold);border-radius:12px;}
.beam{position:absolute;top:0;left:0;width:100%;height:8px;
background:linear-gradient(to bottom,rgba(255,215,0,0),rgba(255,215,0,1),rgba(255,215,0,0));
box-shadow:0 0 25px 5px var(--gold);border-radius:4px;animation:beamMove 3s linear forwards;}
@keyframes beamMove{0%{transform:translateY(0);opacity:1;}100%{transform:translateY(100%);opacity:0;}}
.flashFreeze{animation:flash 0.4s ease-out;}
@keyframes flash{0%{filter:brightness(2);}100%{filter:brightness(1);}}
</style>
</head>
<body>
<h1>🖐️ Sathyadarshana Quantum Palm Analyzer · V12.8 Beam Aura + Pre-Freeze Edition</h1>
<p id="status">Initializing...</p>

<div class="wrap">
  <!-- Left Hand -->
  <div class="camCol">
    <h3>Left Hand</h3>
    <video id="vidLeft" autoplay playsinline></video>
    <canvas id="canvasLeft" width="300" height="400"></canvas>
    <div class="camBtns">
      <button id="startCamLeft">📷 Start</button>
      <button id="captureLeft">📸 Capture</button>
    </div>
  </div>

  <!-- Right Hand -->
  <div class="camCol">
    <h3>Right Hand</h3>
    <video id="vidRight" autoplay playsinline></video>
    <canvas id="canvasRight" width="300" height="400"></canvas>
    <div class="camBtns">
      <button id="startCamRight">📷 Start</button>
      <button id="captureRight">📸 Capture</button>
    </div>
  </div>
</div>

<div class="reportBox" id="report">
  Your palms are being scanned by AI Buddhi...
</div>

<script>
const $=id=>document.getElementById(id);
let streamL,streamR;

async function startCam(side){
 const vid=side==="left"?$("vidLeft"):$("vidRight");
 const st=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});
 vid.srcObject=st;
 if(side==="left")streamL=st;else streamR=st;
 $("status").textContent=`${side} camera started ✅`;
}

// --- Fixed Capture with Pre-Freeze Flash ---
async function capture(side){
 const vid=side==="left"?$("vidLeft"):$("vidRight");
 const cvs=side==="left"?$("canvasLeft"):$("canvasRight");
 const ctx=cvs.getContext("2d");

 // ✨ Pre-freeze flash effect
 vid.classList.add("flashFreeze");
 setTimeout(()=>vid.classList.remove("flashFreeze"),400);

 // 🕐 Wait for frame stabilization
 await new Promise(r=>setTimeout(r,150));

 // ✅ Draw stable frame
 ctx.drawImage(vid,0,0,cvs.width,cvs.height);
 cvs.classList.add("lockedImg");
 $("status").textContent=`${side} hand captured 🔒`;

 if(side==="right") sequenceStart();
}

// --- Main Sequence ---
async function sequenceStart(){
 $("status").textContent="🧠 Processing dual capture...";
 await pause(3000);

 // 🔆 Beam Animation
 const beam=document.createElement("div");
 beam.className="beam";
 $("canvasLeft").parentElement.appendChild(beam);
 await pause(3000);
 beam.remove();

 // 🖼️ Print Zone
 const zone=document.createElement("div");
 zone.className="printZone";
 const l=new Image();l.src=$("canvasLeft").toDataURL("image/png");
 const r=new Image();r.src=$("canvasRight").toDataURL("image/png");
 zone.append(l,r);document.body.appendChild(zone);

 await pause(3000);

 // ✍️ Draw main 8 golden lines
 drawPalmLines($("canvasLeft").getContext("2d"),"#FFD700");
 drawPalmLines($("canvasRight").getContext("2d"),"#FFD700");

 $("status").textContent="✨ Beam Aura complete — main palm lines detected!";
 const rbox=$("report");
 rbox.innerHTML="⚡ Dual-hand capture complete.<br>Energy lines mapped successfully.<br>Wisdom level: <b>High</b> 🌟";
 speak(rbox.innerText);
}

// --- Palm Lines Drawer ---
function drawPalmLines(ctx,color){
 ctx.strokeStyle=color;ctx.lineWidth=2;
 const w=ctx.canvas.width,h=ctx.canvas.height;
 const lines=[
  [[w*0.2,h*0.7],[w*0.8,h*0.5]], // Life
  [[w*0.3,h*0.8],[w*0.7,h*0.6]], // Fate
  [[w*0.2,h*0.4],[w*0.8,h*0.4]], // Head
  [[w*0.3,h*0.3],[w*0.8,h*0.2]], // Heart
  [[w*0.6,h*0.2],[w*0.8,h*0.1]], // Sun
  [[w*0.5,h*0.9],[w*0.6,h*0.7]], // Health
  [[w*0.7,h*0.6],[w*0.9,h*0.7]], // Marriage
  [[w*0.4,h*0.1],[w*0.6,h*0.3]]  // Manikanda
 ];
 lines.forEach(([a,b])=>{ctx.beginPath();ctx.moveTo(...a);ctx.lineTo(...b);ctx.stroke();});
}

// --- Helpers ---
function pause(ms){return new Promise(r=>setTimeout(r,ms));}
function speak(t){speechSynthesis.speak(new SpeechSynthesisUtterance(t));}

// --- Button Bindings ---
$("startCamLeft").onclick=()=>startCam("left");
$("captureLeft").onclick=()=>capture("left");
$("startCamRight").onclick=()=>startCam("right");
$("captureRight").onclick=()=>capture("right");
</script>
</body>
</html>
