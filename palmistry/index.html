<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ğŸ–ï¸ Sathyadarshana Quantum Palm Analyzer Â· V12.9 True Sync Beam Lock Edition</title>
<style>
:root{
  --bg:#0b0f16;
  --card:#101820;
  --neon:#00e5ff;
  --gold:#FFD700;
}
body{
  margin:0;
  background:var(--bg);
  color:#e6f0ff;
  font-family:'Segoe UI',sans-serif;
  text-align:center;
}
h1{
  color:var(--neon);
  text-shadow:0 0 15px var(--neon);
  margin-top:18px;
  font-size:1.3rem;
}

/* camera layout */
.camWrap{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:20px;
  margin:20px auto;
  width:95%;
  max-width:700px;
}
.camBox{
  position:relative;
  width:300px;
  height:400px;
  background:var(--card);
  border-radius:16px;
  box-shadow:0 0 20px #00e5ff22;
  overflow:hidden;
}
video, .lockedImg{
  width:100%;
  height:100%;
  border-radius:12px;
  background:#000;
  object-fit:cover;
}
.goldenBeam{
  position:absolute;
  top:-100%;
  left:0;
  width:100%;
  height:100%;
  background:linear-gradient(180deg,transparent 0%,rgba(255,215,0,0.45) 50%,transparent 100%);
  box-shadow:0 0 25px var(--gold);
  opacity:0;
  pointer-events:none;
}
button{
  background:var(--neon);
  border:none;
  color:#000;
  font-weight:bold;
  padding:8px 16px;
  border-radius:8px;
  margin-top:8px;
  cursor:pointer;
}
button:hover{background:var(--gold);color:#000;}
</style>
</head>
<body>
<h1>ğŸ•‰ï¸ Sathyadarshana Quantum Palm Analyzer Â· V12.9</h1>

<div class="camWrap">
  <div class="camBox">
    <h3>Left Hand</h3>
    <video id="vidLeft" autoplay playsinline></video>
    <div class="goldenBeam" id="beamLeft"></div>
    <button id="btnLeft">ğŸ“¸ Capture Left</button>
  </div>

  <div class="camBox">
    <h3>Right Hand</h3>
    <video id="vidRight" autoplay playsinline></video>
    <div class="goldenBeam" id="beamRight"></div>
    <button id="btnRight">ğŸ“¸ Capture Right</button>
  </div>
</div>

<p id="status">Awaiting capture...</p>

<script>
const vidL=document.getElementById("vidLeft");
const vidR=document.getElementById("vidRight");
const beamL=document.getElementById("beamLeft");
const beamR=document.getElementById("beamRight");
const status=document.getElementById("status");

let streamL,streamR,leftImg,rightImg,leftLocked=false,rightLocked=false;

// start cameras
async function initCam(){
  const opt={video:{facingMode:"environment",aspectRatio:3/4}};
  try{
    streamL=await navigator.mediaDevices.getUserMedia(opt);
    streamR=await navigator.mediaDevices.getUserMedia(opt);
    vidL.srcObject=streamL;
    vidR.srcObject=streamR;
  }catch(e){alert("Camera error: "+e.message);}
}
initCam();

// capture
document.getElementById("btnLeft").onclick=()=>capture("left");
document.getElementById("btnRight").onclick=()=>capture("right");

function capture(side){
  const vid=side==="left"?vidL:vidR;
  const canvas=document.createElement("canvas");
  canvas.width=vid.videoWidth;
  canvas.height=vid.videoHeight;
  const ctx=canvas.getContext("2d");
  ctx.drawImage(vid,0,0,canvas.width,canvas.height);
  const imgData=canvas.toDataURL("image/png");

  const img=document.createElement("img");
  img.src=imgData;
  img.className="lockedImg";

  if(side==="left"){
    vid.replaceWith(img);
    leftImg=imgData; leftLocked=true;
    status.textContent="âœ… Left captured. Capture right hand.";
  }else{
    vid.replaceWith(img);
    rightImg=imgData; rightLocked=true;
    status.textContent="âœ… Both captured. Preparing beam scan...";
    triggerBeamSequence();
  }
}

// sequence: 3s delay -> beam scroll -> 2s later blackout
function triggerBeamSequence(){
  setTimeout(()=>{
    animateBeams();
    setTimeout(()=>blackout(),5000);
  },3000);
}

// beam scroll animation
function animateBeams(){
  beamL.style.opacity=1;
  beamR.style.opacity=1;
  let y=0;
  const h=400;
  const id=setInterval(()=>{
    y+=6;
    beamL.style.top=y+"px";
    beamR.style.top=y+"px";
    if(y>h){
      clearInterval(id);
      beamL.style.opacity=0;
      beamR.style.opacity=0;
      status.textContent="ğŸŒŸ Beam scan complete.";
    }
  },10);
}

// blackout
function blackout(){
  document.querySelectorAll(".lockedImg").forEach(el=>{
    el.style.filter="brightness(0)";
  });
  stopAll();
  status.textContent="ğŸ–¤ Cameras off.";
}

// stop cameras
function stopAll(){
  [streamL,streamR].forEach(s=>s?.getTracks().forEach(t=>t.stop()));
}
</script>
</body>
</html>
