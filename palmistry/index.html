<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>üñêÔ∏è Sathyadarshana Quantum Palm Analyzer ¬∑ V12.5 User Overlay + $5 PDF Edition</title>
<style>
:root{
  --bg:#0b0f16;
  --card:#101820;
  --neon:#00e5ff;
  --pri:#16f0a7;
  --gold:#FFD700;
}
body{
  margin:0;
  background:var(--bg);
  color:#e6f0ff;
  font-family:'Segoe UI',sans-serif;
  text-align:center;
}
h1{
  color:var(--neon);
  text-shadow:0 0 15px var(--neon);
  margin-top:18px;
  font-size:1.4rem;
}

/* camera area */
.camWrap{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:20px;
  margin:20px auto;
  width:95%;
  max-width:700px;
  position:relative;
}

/* user info overlay */
.userForm{
  position:absolute;
  top:-10px;
  left:50%;
  transform:translateX(-50%);
  width:90%;
  max-width:640px;
  background:#101820cc;
  backdrop-filter:blur(6px);
  border:1px solid #00e5ff55;
  border-radius:14px;
  padding:12px;
  box-shadow:0 0 12px #00e5ff44 inset;
  z-index:10;
}
.userForm label{display:block;text-align:left;font-size:0.9rem;color:#8bd;margin:6px 0 2px;}
.userForm input{
  width:100%;padding:6px;border-radius:6px;background:#0d131b;color:#00e5ff;border:none;
}
.userForm button{
  margin-top:8px;width:100%;background:var(--pri);color:#fff;border:none;border-radius:8px;
  padding:8px;font-weight:bold;
}

.camBox{
  position:relative;
  width:320px;
  background:var(--card);
  border-radius:16px;
  padding:10px;
  box-shadow:0 0 20px #00e5ff22;
  overflow:hidden;
}
video{
  width:100%;
  border-radius:12px;
  background:#000;
}
.goldenBeam{
  position:absolute;
  top:-100%;
  left:0;
  width:100%;
  height:100%;
  background:linear-gradient(180deg,transparent 0%,rgba(255,215,0,0.45) 50%,transparent 100%);
  box-shadow:0 0 20px var(--gold);
  opacity:0;
  pointer-events:none;
}
button{
  background:var(--neon);
  border:none;
  color:#000;
  font-weight:bold;
  padding:8px 16px;
  border-radius:8px;
  margin-top:8px;
}
button:hover{
  background:var(--pri);
  color:#fff;
}

/* options + report */
.options{
  margin:20px auto;
  background:#101820;
  padding:15px;
  border-radius:12px;
  width:90%;
  max-width:680px;
  box-shadow:0 0 20px #00e5ff33 inset;
  text-align:left;
}
.options label{
  display:block;
  margin:8px 0 4px;
  color:#8bd;
  font-size:0.9rem;
}
.options select, .options input[type=range]{
  width:100%;
  background:#0d131b;
  color:#00e5ff;
  border:none;
  border-radius:6px;
  padding:6px;
}
.options input[type=checkbox]{transform:scale(1.3);margin-right:8px}
#reportBox{
  background:#0d131b;
  border-radius:14px;
  padding:12px;
  margin:20px auto;
  width:90%;
  max-width:640px;
  box-shadow:0 0 12px #00e5ff33 inset;
  text-align:left;
  font-size:0.9rem;
  line-height:1.5;
}
</style>
</head>
<body>
<h1>üïâÔ∏è Sathyadarshana Quantum Palm Analyzer ¬∑ V12.5</h1>

<div class="camWrap">
  <!-- üßç‚Äç‚ôÇÔ∏è User Info Overlay -->
  <div class="userForm">
    <label for="userName">Name:</label>
    <input type="text" id="userName" placeholder="Enter your name">
    <label for="userDOB">Date of Birth:</label>
    <input type="date" id="userDOB">
    <label for="userID">ID Number:</label>
    <input type="text" id="userID" placeholder="Enter ID">
    <button id="saveUser">üíæ Save Details</button>
  </div>

  <!-- Left Hand -->
  <div class="camBox" id="leftBox">
    <h3>Left Hand</h3>
    <video id="vidLeft" autoplay playsinline></video>
    <div class="goldenBeam" id="beamLeft"></div>
    <button id="btnLeft">üì∏ Capture Left</button>
  </div>

  <!-- Right Hand -->
  <div class="camBox" id="rightBox">
    <h3>Right Hand</h3>
    <video id="vidRight" autoplay playsinline></video>
    <div class="goldenBeam" id="beamRight"></div>
    <button id="btnRight">üì∏ Capture Right</button>
  </div>
</div>

<div class="options">
  <h3>‚öôÔ∏è Analyzer Options</h3>
  <label>Analyzer Mode:</label>
  <select id="modeSel">
    <option value="basic">Basic Insight</option>
    <option value="advanced" selected>Advanced Line Scan</option>
    <option value="divine">Divine Fusion (AI)</option>
  </select>

  <label>Language:</label>
  <select id="langSel">
    <option value="en">English</option>
    <option value="si" selected>‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω</option>
    <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
  </select>

  <label>Brightness:</label>
  <input id="brightness" type="range" min="0.5" max="2" step="0.1" value="1">

  <label><input type="checkbox" id="autosave" checked> Auto Save Captures</label>

  <div id="google_translate_element" style="margin-top:16px;text-align:center;"></div>

  <div style="text-align:center;margin-top:20px;">
    <button onclick="window.location.href='index.html'" style="background:#00e5ff;color:#000;font-weight:bold;">üè† Back to Home</button>
    <button onclick="window.location.href='ai-buddhi.html'" style="background:#ffb700;color:#000;font-weight:bold;margin-left:10px;">ü§ñ AI Buddhi Live Chat</button>
  </div>

  <div style="text-align:center;margin-top:10px;">
    <button id="fullReportBtn" style="background:#16f0a7;color:#000;font-weight:bold;width:100%;">üìú Generate Full AI Report</button>
    <button id="pdfBtn" style="background:#FFD700;color:#000;font-weight:bold;width:100%;margin-top:8px;">üíµ Download Full Report (5 $)</button>
  </div>
</div>

<div id="reportBox">
  <b>AI Insight:</b>
  <p id="reportText">Awaiting analysis...</p>
</div>

<!-- üåê Google Translator -->
<script type="text/javascript">
function googleTranslateElementInit(){
  new google.translate.TranslateElement({
    pageLanguage:'en',
    includedLanguages:'en,si,ta,hi,bn,zh,ja,fr,de,es,it,ru,ar',
    layout:google.translate.TranslateElement.InlineLayout.SIMPLE
  },'google_translate_element');
}
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<script>
const vidL=document.getElementById("vidLeft");
const vidR=document.getElementById("vidRight");
const report=document.getElementById("reportText");
let stream;

// üé• Start Camera
async function initCam(){
  try{
    stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});
    vidL.srcObject=stream; vidR.srcObject=stream;
  }catch(e){alert("Camera not available");}
}
initCam();

// Capture with restart + auto-analyze
document.getElementById("btnLeft").onclick=()=>capture("left");
document.getElementById("btnRight").onclick=()=>capture("right");

function capture(side){
  const vid=side==="left"?vidL:vidR;
  const beam=document.getElementById(side==="left"?"beamLeft":"beamRight");
  const canvas=document.createElement("canvas");
  canvas.width=vid.videoWidth;canvas.height=vid.videoHeight;
  const ctx=canvas.getContext("2d");
  ctx.drawImage(vid,0,0,canvas.width,canvas.height);

  beam.style.opacity=1; let y=0;
  const id=setInterval(()=>{
    y+=5; beam.style.top=y+"px";
    if(y>canvas.height){
      clearInterval(id); beam.style.opacity=0;
      drawColorLines(ctx,canvas);
      const img=canvas.toDataURL("image/png");
      localStorage.setItem(`palm_${side}`,img);
      if(side==="left"){ restartCamera(); report.textContent="‚úÖ Left hand captured. Now scan right hand."; }
      else{ analyzeBothHands(); }
    }
  },10);
}
function restartCamera(){
  navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})
  .then(s=>{stream=s;vidL.srcObject=stream;vidR.srcObject=stream;})
  .catch(e=>console.error("Restart failed",e));
}
function drawColorLines(ctx,canvas){
  const w=canvas.width,h=canvas.height;
  const colors=["#FFD700","#FF4500","#00CED1","#ADFF2F","#FF69B4","#1E90FF","#9932CC","#FF6347"];
  for(let i=0;i<8;i++){
    ctx.strokeStyle=colors[i];ctx.lineWidth=2;
    ctx.beginPath();const y=h*(i+1)/9;
    ctx.moveTo(0,y);ctx.lineTo(w,y);ctx.stroke();
  }
}
function analyzeBothHands(){
  const left=localStorage.getItem("palm_left");
  const right=localStorage.getItem("palm_right");
  if(!left||!right)return;
  report.innerHTML="üß† Analyzing both hands... please wait.";
  setTimeout(()=>{
    report.innerHTML=`<img src="${left}" width="120" style="border-radius:8px;margin:6px;">
    <img src="${right}" width="120" style="border-radius:8px;margin:6px;">
    <br><b>AI Buddhi Report:</b><br>‡∂î‡∂∂‡∂ú‡∑ö ‡∂Ö‡∂≠‡∑ä ‡∂Ø‡∑ô‡∂ö‡∂∏ ‡∑Ä‡∑í‡∑Å‡∑ä‡∂Ω‡∑ö‡∑Ç‡∂´‡∂∫ ‡∂ö‡∂ª ‡∂á‡∂≠. ‡∂Ö‡∂≠‡∑ö ‡∂ª‡∑ö‡∂õ‡∑è ‡∑Ä‡∂Ω‡∂ß ‡∂Ö‡∂∑‡∑ä‚Äç‡∂∫‡∂±‡∑ä‡∂≠‡∂ª ‡∑Å‡∂ö‡∑ä‡∂≠‡∑í‡∂∏‡∂≠‡∑ä ‡∂Ü‡∂ö‡∑ò‡∂≠‡∑í ‡∂á‡∂≠.
    ‡∂î‡∂∂‡∂ú‡∑ö ‡∂¢‡∑ì‡∑Ä‡∑í‡∂≠‡∂∫‡∑ö ‡∑Å‡∂ö‡∑ä‡∂≠‡∑í‡∂∏‡∂≠‡∑ä ‡∂∏‡∂ú‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∑ì‡∂∏‡∂ö‡∑ä ‡∂¥‡∑Ä‡∂≠‡∑í‡∂± ‡∂Ö‡∂≠‡∂ª, ‡∂î‡∂∂ ‡∂≠‡∑î‡∑Ö ‡∂Ü‡∂≠‡∑ä‡∂∏‡∑ì‡∂∫ ‡∂±‡∑Ä‡∑ù‡∂≠‡∑ä‡∂≠‡∑è‡∂¥‡∂±‡∂∫‡∂ö‡∑ä ‡∂â‡∂¥‡∂Ø‡∑ô‡∂∏‡∑í‡∂±‡∑ä ‡∂¥‡∑Ä‡∂≠‡∑ì.`;
  },3000);
}

// üíæ Save User Info
document.getElementById("saveUser").onclick=()=>{
  const data={name:userName.value,dob:userDOB.value,id:userID.value};
  localStorage.setItem("userData",JSON.stringify(data));
  alert(`‚úÖ Saved: ${data.name||"User"}`);
};

// üìú Full Report
document.getElementById("fullReportBtn").onclick=()=>{
  const d=JSON.parse(localStorage.getItem("userData")||"{}");
  report.textContent=`üìÑ Generating full AI analysis for ${d.name||"User"} (${d.id||"N/A"}) born ${d.dob||"Unknown"}...`;
  setTimeout(()=>{report.textContent+="\n\n‚úÖ Full report ready (Preview).";},3000);
};

// üíµ PDF Download ($5)
document.getElementById("pdfBtn").onclick=()=>{
  const { jsPDF } = window.jspdf;
  const doc=new jsPDF();
  doc.setFont("helvetica","bold");
  doc.text("Sathyadarshana Quantum Palm Analyzer - AI Full Report",10,15);
  const data=JSON.parse(localStorage.getItem("userData")||"{}");
  doc.setFontSize(12);
  doc.text(`Name: ${data.name||"N/A"}`,10,30);
  doc.text(`DOB: ${data.dob||"N/A"}`,10,38);
  doc.text(`ID: ${data.id||"N/A"}`,10,46);
  doc.text("------------------------------------------------------------",10,52);
  doc.text("This report provides advanced AI-driven analysis based on your palm scans.",10,62,{maxWidth:180});
  doc.text("Payment: $5 (Demo version, not charged)",10,84);
  doc.save("AI_Palm_Report.pdf");
  alert("üíµ Your AI Full Report PDF has been generated.");
};

// Brightness
brightness.oninput=()=>{
  const v=brightness.value;
  vidL.style.filter=`brightness(${v})`;
  vidR.style.filter=`brightness(${v})`;
};
</script>
</body>
</html>
