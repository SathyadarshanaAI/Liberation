<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sathya Darshana Quantum Palm Analyzer V5.1</title>
    <link rel="stylesheet" href="./styles.css" />
</head>
<body>
    <h1>Sathya Darshana Quantum Palm Analyzer V5.1</h1>
    <div id="google_translate_element" style="text-align:right;margin:6px 16px;"></div>

    <div class="wrap">
        <div class="camWrap">
            <!-- Left Hand -->
            <div class="camCol">
                <strong>Left Hand</strong>
                <div class="camBox" id="camBoxLeft">
                    <canvas id="canvasLeft"></canvas>
                </div>
                <div class="camBtns">
                    <button class="btn" id="startCamLeft">ðŸ“· Start</button>
                    <button class="btn" id="captureLeft">Capture</button>
                    <button class="btn" id="uploadLeft">Upload Photo</button>
                    <button class="btn" id="torchLeft">ðŸ’¡ Torch</button>
                    <!-- NEW: no app.js changes needed -->
                    <button class="btn" id="cleanLeft">ðŸ§¹ Clean</button>
                </div>
            </div>

            <!-- Right Hand -->
            <div class="camCol">
                <strong>Right Hand</strong>
                <div class="camBox" id="camBoxRight">
                    <canvas id="canvasRight"></canvas>
                </div>
                <div class="camBtns">
                    <button class="btn" id="startCamRight">ðŸ“· Start</button>
                    <button class="btn" id="captureRight">Capture</button>
                    <button class="btn" id="uploadRight">Upload Photo</button>
                    <button class="btn" id="torchRight">ðŸ’¡ Torch</button>
                    <!-- NEW: no app.js changes needed -->
                    <button class="btn" id="cleanRight">ðŸ§¹ Clean</button>
                </div>
            </div>
        </div>

        <!-- Shared Controls -->
        <div class="toolbar">
            <button class="btn" id="analyze">Analyze</button>
            <button class="btn" id="miniReport">Mini Report</button>
            <button class="btn" id="fullReport">Full Report (PDF)</button>
            <button class="btn" id="speak">ðŸ”Š Speak</button>
            <select id="language">
                <option value="en">English</option>
                <option value="si">Sinhala</option>
                <option value="ta">Tamil</option>
                <option value="fr">French</option>
                <option value="de">German</option>
                <option value="es">Spanish</option>
                <option value="zh-cn">Chinese (Simplified)</option>
                <option value="hi">Hindi</option>
                <option value="ar">Arabic</option>
                <option value="ja">Japanese</option>
                <option value="ru">Russian</option>
                <option value="pt">Portuguese</option>
                <option value="ko">Korean</option>
                <option value="it">Italian</option>
                <option value="tr">Turkish</option>
                <option value="id">Indonesian</option>
                <option value="nl">Dutch</option>
                <option value="sv">Swedish</option>
            </select>
        </div>

        <div id="status">Ready</div>
        <pre id="insight"></pre>
    </div>

    <!-- Google Translate Script -->
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <script>
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'en,si,ta,fr,de,es,zh-CN,hi,ar,ja,ru,pt,ko,it,tr,id,nl,sv',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE
            }, 'google_translate_element');
        }
    </script>

    <!-- Keep your main app module untouched -->
    <script type="module" src="./app.js"></script>

    <!-- Inline helpers JUST for Clean buttons (no app.js edits) -->
    <script>
      (function () {
        const statusEl = document.getElementById('status');
        const leftCanvas  = document.getElementById('canvasLeft');
        const rightCanvas = document.getElementById('canvasRight');

        function clearCanvas(canvas) {
          if (!canvas) return;
          const w = canvas.width || canvas.getBoundingClientRect().width || 0;
          const h = canvas.height || canvas.getBoundingClientRect().height || 0;

          // Ensure intrinsic size exists so clearRect actually clears pixels
          if (!canvas.width || !canvas.height) {
            // snapshot CSS pixels â†’ set backing store
            const rect = canvas.getBoundingClientRect();
            canvas.width  = Math.max(1, Math.round(rect.width));
            canvas.height = Math.max(1, Math.round(rect.height));
          }

          const ctx = canvas.getContext('2d');
          ctx.clearRect(0, 0, canvas.width, canvas.height);

          // Optional faint placeholder grid (visual cue that it's cleared)
          // comment these three lines if you want pure transparent
          // ctx.strokeStyle = 'rgba(255,255,255,0.08)';
          // ctx.strokeRect(0.5, 0.5, canvas.width - 1, canvas.height - 1);
          // ctx.setLineDash([6, 6]), ctx.stroke();

          // Brief flash to show action (no CSS dependency)
          canvas.style.transition = 'opacity .15s ease';
          canvas.style.opacity = '0.6';
          setTimeout(() => (canvas.style.opacity = ''), 120);
        }

        function setStatus(msg) {
          if (statusEl) statusEl.textContent = msg;
        }

        document.getElementById('cleanLeft')?.addEventListener('click', () => {
          clearCanvas(leftCanvas);
          setStatus('Cleared left hand.');
        });

        document.getElementById('cleanRight')?.addEventListener('click', () => {
          clearCanvas(rightCanvas);
          setStatus('Cleared right hand.');
        });
      })();
    </script>

    <!-- jsPDF CDN for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</body>
</html>
