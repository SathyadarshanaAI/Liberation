<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Quantum Palm Analyzer v5.1 ¬∑ Sathyadarshana</title>
<meta name="theme-color" content="#0b0f16"/>
<style>
:root{
  --bg:#0b0f16;--neon:#00e5ff;--pri:#16f0a7;--text:#e6f0ff;--card:#101820;
}
*{box-sizing:border-box}
body{
  margin:0;background:var(--bg);color:var(--text);
  font-family:system-ui,Segoe UI,sans-serif;text-align:center;
}
h1{color:var(--neon);margin:18px 0 8px;font-size:1.8rem;}
p{opacity:.9}
video,canvas{
  width:92vw;max-width:420px;height:auto;
  border-radius:16px;border:2px solid var(--pri);
  display:block;margin:auto;background:#000;
}
.btn{
  display:inline-block;margin:8px;padding:10px 16px;
  border-radius:10px;border:2px solid var(--neon);
  color:var(--neon);text-decoration:none;font-weight:700;
  background:transparent;transition:.25s;
}
.btn:hover{background:var(--neon);color:#000;}
.tip{font-size:.9rem;opacity:.7;margin-top:6px}
.footer{margin:20px 0;font-size:.8rem;opacity:.8}
</style>
</head>
<body>

<h1>Quantum Palm Analyzer v5.1</h1>
<p>AI-powered edge detection & palm analysis (Neon Edition)</p>

<video id="video" autoplay playsinline></video>
<canvas id="canvas"></canvas>

<p>
  <button class="btn" id="openCam">Open Camera</button>
  <button class="btn" id="snap">Snap</button>
  <button class="btn" id="close">Close</button>
</p>

<p class="tip">Tip: Camera works only on <b>HTTPS</b> or <b>localhost</b>.</p>

<hr style="border-color:#1e293b;margin:18px 0">

<p>
  <a href="/Liberation/palmistry/index.html?v=500" class="btn">üîÆ Open Quantum Palm Analyzer v5</a>
  <a href="/Liberation/index.html" class="btn">üè† Back to Home</a>
</p>

<p class="footer">¬© 2025 Sathyadarshana ¬∑ Light of Truth ¬∑ All rights reserved.</p>

<script>
const video=document.getElementById('video');
const canvas=document.getElementById('canvas');
const snap=document.getElementById('snap');
const openCam=document.getElementById('openCam');
const closeBtn=document.getElementById('close');
let stream=null;

// ---- Camera Controls ----
openCam.onclick=async()=>{
 try{
   stream=await navigator.mediaDevices.getUserMedia({video:true});
   video.srcObject=stream;
 }catch(err){
   alert("Camera access failed: "+err);
 }
};

// ---- Neon Edge Detection (Sobel filter) ----
function edgeOverlay(ctx,w,h){
  const img=ctx.getImageData(0,0,w,h), d=img.data;
  const edges=new Uint8ClampedArray(w*h);
  for(let y=1;y<h-1;y++){
    for(let x=1;x<w-1;x++){
      const i=(y*w+x)*4;
      const gx=(d[i-4-w*4]+2*d[i-4]+d[i-4+w*4])-(d[i+4-w*4]+2*d[i+4]+d[i+4+w*4]);
      const gy=(d[i-4-w*4]+2*d[i-w*4]+d[i+4-w*4])-(d[i-4+w*4]+2*d[i+w*4]+d[i+4+w*4]);
      const mag=Math.hypot(gx,gy);
      edges[y*w+x]=mag>60?255:0;
    }
  }
  for(let y=0;y<h;y++){
    for(let x=0;x<w;x++){
      const i=(y*w+x)*4;
      if(edges[y*w+x]){d[i]=0;d[i+1]=229;d[i+2]=255;} // neon cyan lines
    }
  }
  ctx.putImageData(img,0,0);
}

// ---- Snapshot ----
snap.onclick=()=>{
 if(!video.srcObject)return;
 const ctx=canvas.getContext('2d');
 canvas.width=video.videoWidth;
 canvas.height=video.videoHeight;
 ctx.drawImage(video,0,0,canvas.width,canvas.height);
 edgeOverlay(ctx,canvas.width,canvas.height);
 console.log("Quantum Palm Analyzer v5.1 ‚Äî Snapshot processed.");
};

// ---- Close Camera ----
closeBtn.onclick=()=>{
 if(stream){stream.getTracks().forEach(t=>t.stop());video.srcObject=null;}
};
</script>

</body>
</html>
