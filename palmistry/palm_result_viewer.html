<div style="margin:12px 0">
  <label>Language: </label>
  <select id="lang">
    <option value="en">English</option>
    <option value="si">සිංහල (Sinhala)</option>
    <option value="ta">தமிழ் (Tamil)</option>
    <option value="hi">हिन्दी (Hindi)</option>
    <option value="ar">العربية (Arabic)</option>
    <option value="es">Español (Spanish)</option>
    <option value="fr">Français (French)</option>
    <option value="de">Deutsch (German)</option>
    <option value="zh-CN">中文 (Chinese)</option>
    <option value="ja">日本語 (Japanese)</option>
  </select>
</div>

<pre id="reportBox" style="white-space:pre-wrap;border:1px solid #ccc;padding:10px;border-radius:8px"></pre>

<script>
async function loadReport(lang){
  const file = lang==='en' ? 'report_en.txt' : `report_${lang}.txt`;
  try{
    const res = await fetch(file);
    if(!res.ok) throw new Error(res.status);
    document.getElementById('reportBox').textContent = await res.text();
  }catch(e){
    document.getElementById('reportBox').textContent =
      `Report not found for "${lang}". Generate it first.\nLooking for: ${file}`;
  }
}

document.getElementById('lang').addEventListener('change', e => loadReport(e.target.value));

const supported = ["en","si","ta","hi","ar","es","fr","de","zh-CN","ja"];
const userLang = (navigator.language || navigator.userLanguage || "en");
const defaultLang = supported.includes(userLang) ? userLang : "en";
document.getElementById('lang').value = defaultLang;
loadReport(defaultLang);
</script>
